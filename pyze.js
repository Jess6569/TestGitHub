"object"!=typeof Constants&&(Constants={COPYRIGHT_MSG:"Pyze - Growth Intelligence for Every App | https://pyze.com | All rights reserved | 2013 - "+(new Date).getFullYear(),postUrl:"https://unifiedcollector.pyze.com/",k_PAKLength:22,k_PAIDLength:23,k_getPyzeAppInstanceIdCharSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k_getPyzeAppInstanceId2CharSet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",k_PyzeAppInstanceId:"paid",k_PyzeAppInstanceId_2:"paid2",k_CommonMsgId:"msg_id",k_UserId:"~uid",PYZE_DATA_VERSION:"12",PLATFORM_NAME_ID:"b",PYZE_SDK_VERSION:"3.0.0",WEB_APP_BUILD_VERSION:"webAppBuildVersion",titleSeparator:"$$",pageURLSeparator:"##",timeInSecondsSeparator:"~~",k_screenWidth:"sw",k_screenHeight:"sh",k_supportsWebStorage:"ws",k_cookiesEnabled:"ce",k_CookieTest:"pyzeCookie",k_LocaleLanguage:"lan",k_LocaleRegion:"lrg",k_LocaleCountry:"lco",k_OldPAK:"oldPAK",k_Cookie_Expiration_Days:365,k_AgentCollectionEpoch:"ace",k_agentSentEpoch:"ase",k_LocalDeviceTime:"ldt",k_PyzeVersionNumberKey:"~v",k_PyzeAppKey:"pak",k_userAgent:"ua",k_LocalHour:"~lh",k_Hour:"~h",k_Day:"~d",k_Month:"~m",k_Quarter:"~q",k_Week:"~w",k_local_time_zone:"ltz",k_CompleteDate:"cd",PREFS_U15M:"u15m",PREFS_U30M:"u30m",PREFS_U60M:"u60m",PREFS_AGGREGATE_SCREEN_TIME:"aggregateSecondsScreenTime",k_TotalAggregateScreenflowTime:"tsf",k_TotalAggregateScreenflowTimePerDay:"tsfd",k_appExceeds7dayUsage:"appExceeds7dayUsage",k_ActivationUsageMsgU15:"~a:u15m",k_ActivationUsageMsgU30:"~a:u30m",k_ActivationUsageMsgU60:"~a:u60m",k_ActivationUsageMsgUD3:"~a:3UD",k_ActivationUsageMsgUD5:"~a:5UD",k_ActivationUsageMsgUD7:"~a:7UD",k_ActivationUsageMsgB2DinL7:"~a:2DL7",k_ActivationUsageMsgB3DinL7:"~a:3DL7",k_SevenDays:"sevenDays",k_ActivationLaunchC5:"~a:LR5",k_ActivationLaunchC10:"~a:LR10",k_ActivationLaunchC3:"~a:LR3",PREFS_NUM_LAUNCHES:"nl",PREFS_LAST_USAGE_DAY:"lastUsageDay",PREFS_THREE_USAGE_DAYS:"l3D",PREFS_FIVE_USAGE_DAYS:"l5D",PREFS_SEVEN_USAGE_DAYS:"l7D",PREFS_LAST_DAYS_USED:"LDU",PREFS_TWO_USAGE_DAYS_IN_L7:"2DL7",PREFS_THREE_USAGE_DAYS_IN_L7:"3DL7",k_AggregateSecondsScreenTime:"asst",k_LastSeen:"lastSeen",k_ScreenFlow:"~sf",ACTIVATE:"~a:Activation",k_ExternalReferrer:"er",k_DURATION5m:"~a:u5mo%dD",k_DURATION10m:"~a:u10mo%dD",k_DURATION15m:"~a:u15mo%dD",k_DURATION30m:"~a:u30mo%dD",k_AppExceed3Dayusage:"appExceeds3dayUsage",k_AppExceed5Dayusage:"appExceeds5dayUsage",k_AppExceed7Dayusage:"appExceeds7dayUsage",TABLE_TRAITS:"t",TABLE_STATES:"s",TABLE_INSTALLS:"i",TABLE_EVENTS:"e",TABLE_SMS:"m",TABLE_IDENTITY:"u",k_FullTrait:"~ft",MAX_ATTRIBUTES:100,k_PyzeEvent:"~e",PREFS_EVENT_FLOW:"eventflow",PREVIOUS_PAK_NAME:"ppak",k_LAST_EVENT_OCCURED:"leo",k_EventCounter:"ec",k_attributes:"attributes",k_PageName:"page",k_Referrer:"ref",k_PageViewOccured:"pv",k_PageTitle:"ttl",k_PostPageView:"ppv",k_WebReferrer:"wrt",k_UTMSource:"us",k_UTMCampaign:"uc",k_UTMMedium:"um",k_PyzeSession:"pyzeS",k_PyzeActivation:"pyzeA",k_PyzeUsage:"pyzeU",k_PyzeKey:"pyzeID",k_PyzeMultiActivation:"pyzeM",k_PyzeLaunchActivation:"pyzeL",k_PyzeTraitChanges:"pyzeT",k_PyzeCounter:"pyzeC",k_PyzeDateUsage:"pyzeDU",k_PyzeStorage:"pyze",k_PYZE_UNSENT_EVENTS:"pyzeUE",k_PreviousEvent:"pyzePE",k_SessionId:"sid",k_LastEventTime:"let",k_sessionTimeout:18e5,k_Elapsed_Time:"elapsedSeconds",k_pyzeEvent:"~e",k_pyzeEventFlow:"~ef",k_OLD_VERSION:"oldVersion",k_NEW_VERSION:"newVersion",k_AppBuildVersion:"av",k_Path:"path",k_Title:"title",k_ReferrerType:"referrer",Event:{PYZE_OS_VERSION_CHANGED:"pyze.OSVersionChanged",PYZE_APP_VERSION_CHANGED:"pyze.AppVersionChanged",Activation:{ACTIVATE:"~a:Activation"}},appKey:"appKey",msgID:"messageId",userID:"userId",appId:"appInstanceId",appId2:"appInstanceId2",agentSentEpoch:"sentEpoch",agentCollectionEpoch:"collectedEpoch",local_device_time:"localDeviceTime",old_app_key:"previousAppKey",library:"library",localeLanguage:"language",localeRegion:"region",localeCountry:"country",cookieEnabled:"cookieEnabled",webStorage:"webStorage",screenWidth:"widthInPixel",screenHeight:"heightInPixel",timezone:"timezone",userAgent:"userAgent",utmSource:"source",utmMedium:"medium",utmCampaign:"campaign",referrerType:"referrerType",pagePath:"path",pageTitle:"title",pageReferrer:"referrer",k_Type:"type",k_Event:"event",k_Platform:"platform",k_Source:"source",k_Version:"version",dailyActivity:"dailyActivity",weeklyActivity:"weeklyActivity",hourlyActivity:"hourlyActivity",localHourActivity:"localHourActivity",quarterlyActivity:"quarterlyActivity",monthlyActivity:"monthlyActivity",session3rd:"session3rd",session5th:"session5th",session10th:"session10th",two_usage_days_in_L7:"firstTimeAppUsedFor2DaysInLast7Days",three_usage_days_in_L7:"firstTimeAppUsedFor3DaysInLast7Days",three_unique_days:"firstTimeAppUsedFor3UniqueDays",five_unique_days:"firstTimeAppUsedFor5UniqueDays",seven_unique_days:"firstTimeAppUsedFor7UniqueDays",aggregate15Min:"aggregateUsageExceeds15Min",aggregate30Min:"aggregateUsageExceeds30Min",aggregate60Min:"aggregateUsageExceeds60Min",k_context:"context",k_Application:"application",k_Locale:"locale",k_page:"page",k_screen:"screen",k_storage:"storage",k_utm:"utm",k_properties:"properties",k_identityTraits:"identityTraits",idbName:"unsentPayloadDB",idbStore:"unsentPayloads",idbVersion:1,idbTransaction:"unsentPayloads",idbTransactionMode:"readwrite",deleteUserEvent:"Pyze.deleteUser",setOptOut:"Pyze.setUserOptOut",k_deleteUser:"deleteUser",k_setUserOptOut:"setUserOptOut",retryCount:"retryCount",timeOfAttempt:"retryTimestamp",retry_when_500:2,maxRetries:6,sessionTimestamp:"sessionTimestamp",sessionEvent:"Pyze.Session"}),function(){var y=function(){"use strict";function s(t){var e=-t.getTimezoneOffset();return null!==e?e:0}function a(t){for(var e=new Date(t,0,1,0,0,1,0).getTime(),n=new Date(t,12,31,23,59,59).getTime(),s=e,a=new Date(s).getTimezoneOffset(),o=null,r=null;s<n-864e5;){var i=new Date(s),l=i.getTimezoneOffset();l!==a&&(l<a&&(o=i),a<l&&(r=i),a=l),s+=864e5}return!(!o||!r)&&{s:c(o).getTime(),e:c(r).getTime()}}function e(t){var e=function(){for(var t=[],e=0;e<y.olson.dst_rules.years.length;e++){var n=a(y.olson.dst_rules.years[e]);t.push(n)}return t}();return function(t){for(var e=0;e<t.length;e++)if(!1!==t[e])return!0;return!1}(e)?function(s,a){for(var t=function(t){for(var e=0,n=0;n<s.length;n++)if(t.rules[n]&&s[n]){if(!(s[n].s>=t.rules[n].s&&s[n].e<=t.rules[n].e)){e="N/A";break}if(e=0,e+=Math.abs(s[n].s-t.rules[n].s),e+=Math.abs(t.rules[n].e-s[n].e),p.MAX_SCORE<e){e="N/A";break}}return function(t,e,n,s){if("N/A"!==n)return n;if("Asia/Beirut"===e){if("Africa/Cairo"===s.name&&13983768e5===t[6].s&&14116788e5===t[6].e)return 0;if("Asia/Jerusalem"===s.name&&13959648e5===t[6].s&&14118588e5===t[6].e)return 0}else if("America/Santiago"===e){if("America/Asuncion"===s.name&&14124816e5===t[6].s&&1397358e6===t[6].e)return 0;if("America/Campo_Grande"===s.name&&14136912e5===t[6].s&&13925196e5===t[6].e)return 0}else if("America/Montevideo"===e){if("America/Sao_Paulo"===s.name&&14136876e5===t[6].s&&1392516e6===t[6].e)return 0}else if("Pacific/Auckland"===e&&"Pacific/Fiji"===s.name&&14142456e5===t[6].s&&13961016e5===t[6].e)return 0;return n}(s,a,e,t)},e={},n=y.olson.dst_rules.zones,o=n.length,r=p.AMBIGUITIES[a],i=0;i<o;i++){var l=n[i],c=t(n[i]);"N/A"!==c&&(e[l.name]=c)}for(var u in e)if(e.hasOwnProperty(u))for(var g=0;g<r.length;g++)if(r[g]===u)return u;return a}(e,t):t}var p={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},c=function t(e,n,s){void 0===n&&(n=p.DAY,s=p.HOUR);for(var a=new Date(e.getTime()-n).getTime(),o=e.getTime()+n,r=new Date(a).getTimezoneOffset(),i=a,l=null;i<o-s;){var c=new Date(i);if(c.getTimezoneOffset()!==r){l=c;break}i+=s}return n===p.DAY?t(l,p.HOUR,p.MINUTE):n===p.HOUR?t(l,p.MINUTE,p.SECOND):l};return{determine:function(){var t=function(){var t,e;if("undefined"!=typeof Intl&&void 0!==Intl.DateTimeFormat&&(void 0!==(t=Intl.DateTimeFormat())&&void 0!==t.resolvedOptions))return(e=t.resolvedOptions().timeZone)&&(-1<e.indexOf("/")||"UTC"===e)?e:void 0}();return t||(t=y.olson.timezones[function(){var t=s(new Date(p.BASELINE_YEAR,0,2)),e=s(new Date(p.BASELINE_YEAR,5,2)),n=t-e;return n<0?t+",1":0<n?e+",1,s":t+",0"}()],void 0!==p.AMBIGUITIES[t]&&(t=e(t))),{name:function(){return t}}}}}();y.olson=y.olson||{},y.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},y.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"Africa/Casablanca",rules:[{e:12202236e5,s:12122784e5},{e:12508092e5,s:12438144e5},{e:1281222e6,s:12727584e5},{e:13120668e5,s:13017888e5},{e:13489704e5,s:1345428e6},{e:13828392e5,s:13761e8},{e:14142888e5,s:14069448e5}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Santiago",rules:[{e:1206846e6,s:1223784e6},{e:1237086e6,s:12552336e5},{e:127035e7,s:12866832e5},{e:13048236e5,s:13138992e5},{e:13356684e5,s:13465584e5},{e:1367118e6,s:13786128e5},{e:13985676e5,s:14100624e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:1414098e6,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]},{name:"Europe/London",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]}]},"undefined"!=typeof module&&void 0!==module.exports?module.exports=y:window.jstz=y}(),"object"!=typeof Base64&&(Base64=function(){var u;return u={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(t)))}catch(t){}return u._encode(t)},_encode:function(t){var e,n,s,a,o,r,i,l="",c=0;for(t=UTF8.encode(t);c<t.length;)a=(e=t.charCodeAt(c++))>>2,o=(3&e)<<4|(n=t.charCodeAt(c++))>>4,r=(15&n)<<2|(s=t.charCodeAt(c++))>>6,i=63&s,isNaN(n)?r=i=64:isNaN(s)&&(i=64),l=l+u._keyStr.charAt(a)+u._keyStr.charAt(o)+u._keyStr.charAt(r)+u._keyStr.charAt(i);return l},decode:function(t){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(t)))}catch(t){}return u._decode(t)},_decode:function(t){var e,n,s,a,o,r,i="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)e=u._keyStr.indexOf(t.charAt(l++))<<2|(a=u._keyStr.indexOf(t.charAt(l++)))>>4,n=(15&a)<<4|(o=u._keyStr.indexOf(t.charAt(l++)))>>2,s=(3&o)<<6|(r=u._keyStr.indexOf(t.charAt(l++))),i+=String.fromCharCode(e),64!==o&&(i+=String.fromCharCode(n)),64!==r&&(i+=String.fromCharCode(s));return i=UTF8.decode(i)}}}()),"object"!=typeof UTF8&&(UTF8={encode:function(t){for(var e="",n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?e+=String.fromCharCode(s):(127<s&&s<2048?e+=String.fromCharCode(s>>6|192):(e+=String.fromCharCode(s>>12|224),e+=String.fromCharCode(s>>6&63|128)),e+=String.fromCharCode(63&s|128))}return e},decode:function(t){for(var e="",n=0,s=0,a=0,o=0;n<t.length;)(s=t.charCodeAt(n))<128?(e+=String.fromCharCode(s),n++):191<s&&s<224?(a=t.charCodeAt(n+1),e+=String.fromCharCode((31&s)<<6|63&a),n+=2):(a=t.charCodeAt(n+1),o=t.charCodeAt(n+2),e+=String.fromCharCode((15&s)<<12|(63&a)<<6|63&o),n+=3);return e}}),"object"!=typeof pyze&&(pyze=function(){var b,I,D,l,c;function u(t){return!t||0===t.length}function o(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}function O(t){if(!t)return!0;var e,n=!0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n=!1);return n}function g(t){return null!=t&&null!=t&&""!=t&&"NA"!=t&&t.toString()}function U(t){return t<10&&(t="0"+t),t}function p(){return(new Date).getTime()}function d(){return!(!function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}()||!function(){var t="test";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(t){return!1}}())}function s(t,e,n){var s;if(n){n=Constants.k_Cookie_Expiration_Days;var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),s="; expires="+a.toUTCString()}else s="";document.cookie=t+"="+e+s+"; path=/"}function a(t){for(var e=t+"=",n=document.cookie.split(";"),s=null,a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e)){s=o.substring(e.length,o.length);break}}return s||null}function n(t){document.cookie=t+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function _(){var t,e=(new Date).toString();try{return s(Constants.k_CookieTest,e),t=a(Constants.k_CookieTest)===e,n(Constants.k_CookieTest),t}catch(t){console.log("cookies are not enabled."+t.message)}return!1}function y(t,e){if("localStorage"==t){var n=localStorage.getItem(e);return null!=(n=Base64.decode(n))&&null!=n&&""!=n&&JSON.parse(n)}if("sessionStorage"==t){n=sessionStorage.getItem(e);return null!=(n=Base64.decode(n))&&null!=n&&""!=n&&JSON.parse(n)}if("cookie"==t){var s=a(e);return null!=(s=Base64.decode(s))&&null!=s&&JSON.parse(s)}}function w(t,e,n){"localStorage"==t?(n=Base64.encode(JSON.stringify(n)),localStorage.setItem(e,n)):"sessionStorage"==t?(n=Base64.encode(JSON.stringify(n)),sessionStorage.setItem(e,n)):"cookie"==t&&s(e,n=Base64.encode(JSON.stringify(n)),Constants.k_Cookie_Expiration_Days)}function N(t,e,n){return function(t,e){var n;if("localStorage"==t)return null!=(n=localStorage.getItem(e))&&null!=n&&""!=n;if("sessionStorage"==t)return null!=(n=sessionStorage.getItem(e))&&null!=n&&""!=n;if("cookie"==t){var s=a(e);return null!=s&&null!=s}}(t,e)?y(t,e):n}function f(){return(window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth)+"x"+(window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight)}function m(){return navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage)||void 0}function r(t){function e(t,e){return function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))}(t,e)}function n(t,e){u(e)||(r[t]=e)}var s=e("utm_source",t),a=e("utm_medium",t),o=e("utm_campaign",t),r={};return n("utm_source",s),n("utm_medium",a),n("utm_campaign",o),r}function C(){return Constants.PYZE_DATA_VERSION.toString()+"-"+Constants.PLATFORM_NAME_ID+"-"+Constants.PYZE_SDK_VERSION}function i(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+U(t.getHours())+":"+U(t.getMinutes())+":"+U(t.getSeconds())+" "+t.toString().split("GMT")[1].split(" (")[0]}function k(t,e){var n={};return n[Constants.pagePath]=e||window.location.pathname||"None",n[Constants.pageTitle]=t||document.title||"None",n[Constants.referrerType]=document.referrer||"None",n[Constants.pageReferrer]=function(){var e="";try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(t){e=""}}return""===e&&(e=document.referrer),e.toString()}(),n}function S(){var t={},e=r(location.search);return b.isObjectEmpty(e)||(e.utm_source&&(t[Constants.utmSource]=e.utm_source),e.utm_campaign&&(t[Constants.utmCampaign]=e.utm_campaign),e.utm_medium&&(t[Constants.utmMedium]=e.utm_medium)),t}function A(t){try{var e,n={};try{e=N(I,Constants.k_PyzeStorage)||{}}catch(t){e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var s=e[Constants.k_PyzeKey];t[Constants.appKey]=s[Constants.k_PyzeAppKey].toString()||D,t[Constants.appId]=s[Constants.k_PyzeAppInstanceId]?s[Constants.k_PyzeAppInstanceId]:j(Constants.k_getPyzeAppInstanceIdCharSet,Constants.k_PyzeAppInstanceId).toString(),t[Constants.appId2]=s[Constants.k_PyzeAppInstanceId_2]?s[Constants.k_PyzeAppInstanceId_2]:j(Constants.k_getPyzeAppInstanceId2CharSet,Constants.k_PyzeAppInstanceId_2).toString(),t[Constants.k_context]={},n[Constants.k_PyzeVersionNumberKey]=C(),v(t);var a=f();n[Constants.k_screenWidth]=a.split("x")[0].toString(),n[Constants.k_screenHeight]=a.split("x")[1].toString(),n[Constants.k_supportsWebStorage]=d()?"Enabled".toString():"Disabled".toString(),n[Constants.k_cookiesEnabled]=_()?"Enabled".toString():"Disabled".toString();var o=m(),r=o.split("-")[0],i=o.split("-")[1].toUpperCase();g(r)&&(n[Constants.k_LocaleLanguage]=r.toString()),g(o)&&(n[Constants.k_LocaleRegion]=r+"-"+i),g(o.slice(-2))&&(n[Constants.k_LocaleCountry]=o.slice(-2).toString().toUpperCase()),e[Constants.k_PyzeTraitChanges]=n,w(I,Constants.k_PyzeStorage,e),s[Constants.k_OldPAK]&&(t[Constants.old_app_key]=s[Constants.k_OldPAK]||"")}catch(t){console.log("Error creating payload: "+t.message)}}function h(t){try{var e={};t[Constants.k_context][Constants.k_screen]=function(t){var e={},n=f();return e[Constants.screenWidth]=t[Constants.k_screenWidth]=parseInt(n.split("x")[0]),e[Constants.screenHeight]=t[Constants.k_screenHeight]=parseInt(n.split("x")[1]),e}(e),t[Constants.k_context][Constants.k_storage]=function(t){var e={};return e[Constants.webStorage]=t[Constants.k_supportsWebStorage]=d()?"Enabled".toString():"Disabled".toString(),e[Constants.cookieEnabled]=t[Constants.k_cookiesEnabled]=_()?"Enabled".toString():"Disabled".toString(),e}(e),t[Constants.k_context][Constants.k_Locale]=function(t){var e={},n=m(),s=n.split("-")[0],a=n.split("-")[1].toUpperCase();return g(s)&&(e[Constants.localeLanguage]=t[Constants.k_LocaleLanguage]=s.toString()),g(n)&&(e[Constants.localeRegion]=t[Constants.k_LocaleRegion]=s+"-"+a),g(n.slice(-2))&&(e[Constants.localeCountry]=t[Constants.k_LocaleCountry]=n.slice(-2).toString().toUpperCase()),e}(e);var n=jstz.determine().name();t[Constants.k_context][Constants.timezone]=n,t[Constants.k_context][Constants.library]=C(),t[Constants.k_context][Constants.userAgent]=navigator.userAgent||"";var s=S();b.isObjectEmpty(s)||(t[Constants.k_context][Constants.k_utm]=s)}catch(t){console.log("Error creating context payload "+t.stack)}}function v(t){try{var e;try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var n=e[Constants.k_PyzeKey];if(t[Constants.appKey]=n[Constants.k_PyzeAppKey].toString()||D,t[Constants.k_Platform]="web",t[Constants.k_Source]="pyzeWebAgent",t[Constants.appId]=n[Constants.k_PyzeAppInstanceId]?n[Constants.k_PyzeAppInstanceId]:j(Constants.k_getPyzeAppInstanceIdCharSet,Constants.k_PyzeAppInstanceId).toString(),t[Constants.appId2]=n[Constants.k_PyzeAppInstanceId_2]?n[Constants.k_PyzeAppInstanceId_2]:j(Constants.k_getPyzeAppInstanceId2CharSet,Constants.k_PyzeAppInstanceId_2).toString(),O(t[Constants.k_properties])){var s={};s[Constants.referrerType]={},s[Constants.referrerType]=document.referrer||"None",t[Constants.k_properties]=s}else t[Constants.k_properties][Constants.referrerType]=document.referrer||"None";t[Constants.msgID]=W(Constants.k_getPyzeAppInstanceIdCharSet),t[Constants.agentSentEpoch]=p(),t[Constants.agentCollectionEpoch]=p(),t[Constants.local_device_time]=i(),t[Constants.k_Version]="1",n[Constants.k_OldPAK]&&(t[Constants.old_app_key]=n[Constants.k_OldPAK]||""),h(t)}catch(t){console.log("Error creating payload "+t.message)}}function E(){!function(){j(Constants.k_getPyzeAppInstanceIdCharSet,Constants.k_PyzeAppInstanceId),j(Constants.k_getPyzeAppInstanceId2CharSet,Constants.k_PyzeAppInstanceId_2);var t={};try{var e,n;t[Constants.k_Type]="event",t[Constants.k_Event]="Application Installed",A(t),X(t,"Pyze.Session start");try{n=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}e=n[Constants.retryCount]||1;var s=n[Constants.timeOfAttempt]||t[Constants.agentSentEpoch];n[Constants.timeOfAttempt]=s,w(I,Constants.k_PyzeStorage,n),b.addPayloadToAllRequests(t)}catch(t){console.log("Error while saving first install "+t.message)}b.postDataExponentially(t,Constants.TABLE_INSTALLS,e,s)}(),G()}function P(t,e){return""!==t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function z(){!function(e){var t,n,s,a=["","webkit","ms","moz","o"];for(n=0;n<a.length;n++)if(s=a[n],Object.prototype.hasOwnProperty.call(document,P(s,"hidden"))){"prerender"===document[P(s,"visibilityState")]&&(t=!0);break}t?addEventListener(document,s+"visibilitychange",function t(){document.removeEventListener(s+"visibilitychange",t,!1),e()}):e()}(function(){var t,e,n={};n[Constants.k_context]={},n[Constants.k_properties]=k(),h(n),n[Constants.k_Type]="page";try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}t=e[Constants.retryCount]||1;var s=e[Constants.timeOfAttempt]||n[Constants.agentSentEpoch];e[Constants.timeOfAttempt]=s,w(I,Constants.k_PyzeStorage,e),b.sendCommonData(n,Constants.TABLE_STATES),b.addPayloadToAllRequests(n),0<o(n)&&b.postDataExponentially(n,Constants.TABLE_STATES,t,s)})}function T(){return!(!(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB)||!navigator.serviceWorker)}function x(){var t=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).open(Constants.idbName,Constants.idbVersion);return t.onsuccess=function(t){},t.onerror=function(t){console.log("IndexedDb throwed connection error: "+t.error)},t.onupgradeneeded=function(t){t.target.result.createObjectStore(Constants.idbStore,{autoIncrement:!1})},t}function L(t,e,n){var s=n.transaction(Constants.idbTransaction,Constants.idbTransactionMode).objectStore(Constants.idbStore).add(t,e);s.onsuccess=function(t){},s.onerror=function(t){console.log("error saving record, check objectstore and transaction: "+t.error)}}function R(t,e,n,s,a){var i,l=p();try{i=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}a<l&&(t[Constants.agentSentEpoch]=l,i[Constants.timeOfAttempt]=l,w(I,Constants.k_PyzeStorage,i),b.postDataFromIndexedDb(JSON.stringify(t),e,n,s,function(t,e,n,s,a,o){if(202===t)a.delete(s);else if(0===t||202!=t)if(500===t){if(o<=Constants.maxRetries){var r=Q(o);setTimeout(function(){b.checkHostReachable(e,n,function(t,e,n){0===t&&500!==t?b.saveUnsentPayload(e,n):o===Constants.maxRetries?(o=i[Constants.retryCount]=1,w(I,Constants.k_PyzeStorage,i),function(){var e=x();e.onerror=function(t){console.log("error indexedDb connection: "+t.error)},e.onsuccess=function(t){db=e.result;var n=db.transaction([Constants.idbTransaction],Constants.idbTransactionMode).objectStore(Constants.idbStore);n.openCursor().onsuccess=function(t){var e=t.target.result;e&&(n.delete(e.key),e.continue())}}}()):(o=i[Constants.retryCount]=o+1,w(I,Constants.k_PyzeStorage,i),R(JSON.parse(e),n,s,o,l))})},r)}}else Z(e,n)}))}function M(t,e,r,n,s){var i,l=p();try{i=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}s<l&&(t[Constants.agentSentEpoch]=l,i[Constants.timeOfAttempt]=l,w(I,Constants.k_PyzeStorage,i),b.postDataToBackEnd(JSON.stringify(t),e,null,function(t,e,n,s,a){if(202===t)delete unsentPyzeEvents[r],w(I,Constants.k_PYZE_UNSENT_EVENTS,unsentPyzeEvents);else if(0===t||202!=t)if(500===t){if(a<=Constants.maxRetries){var o=Q(a);setTimeout(function(){b.checkHostReachable(n,s,function(t,e,n){0===t&&500!==t||(a===Constants.maxRetries?(a=i[Constants.retryCount]=1,w(I,Constants.k_PyzeStorage,i),w(I,Constants.k_PYZE_UNSENT_EVENTS,{})):(a=i[Constants.retryCount]=a+1,w(I,Constants.k_PyzeStorage,i),M(JSON.parse(e),n,a,l)))})},o)}}else Z(n,s)}))}function B(){if(T()){var s=x();s.onsuccess=function(t){if(db=s.result,!db.objectStoreNames.contains(Constants.idbStore))return!1;var e=db.transaction([Constants.idbTransaction],Constants.idbTransactionMode).objectStore(Constants.idbStore),n={};e.openCursor().onsuccess=function(t){var e=t.target.result;e?(n[e.key]=e.value,e.continue()):function(t){for(key in t)try{var e,n,s=JSON.parse(t[key][0]);s[Constants.agentSentEpoch]=p();try{n=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}e=n[Constants.retryCount]||1;var a=n[Constants.timeOfAttempt]||poNewInstalls[Constants.agentSentEpoch];n[Constants.timeOfAttempt]=a,w(I,Constants.k_PyzeStorage,n),R(s,t[key][1],key,e,a)}catch(t){console.log("caught exceptions",t)}}(n)}}}else{var e;try{e=N(I,Constants.k_PYZE_UNSENT_EVENTS,{})}catch(t){e={},console.log("Error: "+t.message+" in "+Constants.k_PYZE_UNSENT_EVENTS)}if(O(e))return;for(key in e)try{var n,t=JSON.parse(e[key][0]);t[Constants.agentSentEpoch]=p();try{n=N(I,Constants.k_PyzeStorage,{})}catch(t){n={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}n[Constants.retryCount]||1;var a=n[Constants.timeOfAttempt]||t[Constants.agentSentEpoch];n[Constants.timeOfAttempt]=a,w(I,Constants.k_PyzeStorage,n),M(t,e[key][1],Number(key),0,a)}catch(t){}}}function H(t){return t.length===Constants.k_PAKLength&&"string"==typeof t}function F(t){return t.length===Constants.k_PAIDLength&&"string"==typeof t}function Y(){var e;try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var t=e[Constants.k_PyzeKey]||{};if(O(t))return!1;var n=t[Constants.k_PyzeAppKey],s=t[Constants.k_PyzeAppInstanceId],a=t[Constants.k_PyzeAppInstanceId_2];if(n&&s&&a){var o=H(n),r=F(s),i=F(a);return!!(o&&r&&i)}return!1}function q(){"localStorage"===I?(localStorage.removeItem(Constants.k_PyzeStorage),sessionStorage.removeItem(Constants.k_PreviousEvent),sessionStorage.removeItem(Constants.k_PyzeSession),localStorage.removeItem(Constants.k_PyzeActivation),localStorage.removeItem(Constants.k_PyzeKey),localStorage.removeItem(Constants.k_PyzeTraitChanges),localStorage.removeItem(Constants.k_PyzeCounter),localStorage.removeItem(Constants.k_PyzeUsage),localStorage.removeItem(Constants.PREFS_LAST_DAYS_USED)):"cookie"===I&&(n(Constants.k_PyzeStorage),n(Constants.k_PreviousEvent),n(Constants.k_PyzeSession),n(Constants.k_PyzeActivation),n(Constants.k_PyzeKey),n(Constants.k_PyzeTraitChanges),n(Constants.k_PyzeCounter),n(Constants.k_PyzeUsage),n(Constants.PREFS_LAST_DAYS_USED))}Date.prototype.getWeekYear=function(){var t=new Date(this.valueOf());return t.setDate(t.getDate()-(this.getDay()+6)%7+3),t.getFullYear()},Date.prototype.getWeek=function(){var t=new Date(this.valueOf()),e=(this.getDay()+6)%7;t.setDate(t.getDate()-e+3);var n=t.valueOf();return t.setMonth(0,1),4!=t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((n-t)/6048e5)},Array.prototype.equals=function(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var e=0,n=this.length;e<n;e++)if(this[e]instanceof Array&&t[e]instanceof Array){if(!this[e].equals(t[e]))return!1}else if(this[e]!=t[e])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1});var K=function(){for(var t={},a=[],e=0;e<256;e++)a[e]=(e<16?"0":"")+e.toString();return t.generate=function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return a[255&t]+a[t>>8&255]+a[t>>16&255]+a[t>>24&255]+"-"+a[255&e]+a[e>>8&255]+"-"+a[e>>16&15|64]+a[e>>24&255]+"-"+a[63&n|128]+a[n>>8&255]+"-"+a[n>>16&255]+a[n>>24&255]+a[255&s]+a[s>>8&255]+a[s>>16&255]+a[s>>24&255]},t}();function V(t,e){return function(t,e){var n,s,a,o,r,i,l,c,u=0,g=0,p=[];if(!t)return t;t=function(t){t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var e,n,s,a,o="";for(e=n=0,s=t.length,a=0;a<s;a++){var r=t.charCodeAt(a),i=null;r<128?n++:i=127<r&&r<2048?String.fromCharCode(r>>6|192,63&r|128):String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128),null!==i&&(e<n&&(o+=t.substring(e,n)),o+=i,e=n=a+1)}e<n&&(o+=t.substring(e,t.length));return o}(t);for(;n=t.charCodeAt(u++),s=t.charCodeAt(u++),a=t.charCodeAt(u++),o=(c=n<<16|s<<8|a)>>18&63,r=c>>12&63,i=c>>6&63,l=63&c,p[g++]=e.charAt(o)+e.charAt(r)+e.charAt(i)+e.charAt(l),u<t.length;);return p.join("")}(function(t){if(null==t)return!1;return!!/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)}(t)?t:K.generate(),e)}function j(t,e){var n=V(K.generate(),t);n=n.replace(/-/g,"+").replace(/_/g,"/");for(var s="",a=0;a<23;a++){var o=Math.floor(Math.random()*n.length);s+=n.substring(o,o+1)}if(23==s.length){var r;try{r=y(I,Constants.k_PyzeStorage)}catch(t){D?b.initialize(D):r={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var i=r[Constants.k_PyzeKey]||{};return i[e]=s,r[Constants.k_PyzeKey]=i,w(I,Constants.k_PyzeStorage,r),void(e==Constants.k_PyzeAppInstanceId?l=s:c=s)}j(t)}function W(t){var e=V(K.generate(),t);e=e.replace(/-/g,"+").replace(/_/g,"/");for(var n="",s=0;s<23;s++){var a=Math.floor(Math.random()*e.length);n+=e.substring(a,a+1)}if(23==n.length)return n;W(t)}function J(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,s=t.getDate(),a=t.getHours(),o=t.getUTCHours(),r=e+"-"+n+"-"+s+"-"+a,i=t.getUTCMonth()+1,l=t.getUTCFullYear()+"-"+i+"-"+t.getUTCDate()+"-"+o,c=t.getUTCFullYear()+"-"+i+"-"+t.getUTCDate(),u=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()),g=u.getWeek(),p=u.getWeekYear()+"-"+U(g),y=t.getUTCFullYear()+"-"+i,C=Math.floor((i-1)/3)+1,d=t.getUTCFullYear()+"-"+C,_=(t.getUTCDate(),t.getUTCFullYear(),t.getUTCFullYear(),t.getUTCMinutes(),{});return _[Constants.k_LocalHour]=r,_[Constants.k_Hour]=l,_[Constants.k_Day]=c,_[Constants.k_Week]=p,_[Constants.k_Month]=y,_[Constants.k_Quarter]=d,_}function G(){var e,t,n=J(),s={},a={};a[Constants.localHourActivity]=s[Constants.k_LocalHour]=n[Constants.k_LocalHour],a[Constants.hourlyActivity]=s[Constants.k_LocalHour]=n[Constants.k_Hour],a[Constants.dailyActivity]=s[Constants.k_Day]=n[Constants.k_Day],a[Constants.weeklyActivity]=s[Constants.k_Week]=n[Constants.k_Week],a[Constants.monthlyActivity]=s[Constants.k_Month]=n[Constants.k_Month],a[Constants.quarterlyActivity]=s[Constants.k_Quarter]=n[Constants.k_Quarter];try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var o={};o[Constants.k_properties]=a,e[Constants.k_PyzeActivation]=s,t=e[Constants.retryCount]||1;var r=e[Constants.timeOfAttempt]||o[Constants.agentSentEpoch];e[Constants.timeOfAttempt]=r,w(I,Constants.k_PyzeStorage,e),o[Constants.k_properties][Constants.k_FullTrait]="1",A(o),b.sendCommonData(o,Constants.TABLE_TRAITS),b.addPayloadToAllRequests(o),b.postDataExponentially(o,Constants.TABLE_TRAITS,t,r)}function Z(t,e){b.checkHostReachable(t,e,function(t,e,n){0===t&&500!==t&&b.saveUnsentPayload(e,n)})}function Q(t){return 60*Math.pow(2,2*t)*1e3}function X(t,e){var n,s,a=JSON.parse(JSON.stringify(t));delete a[Constants.k_attributes],a[Constants.k_Type]="event",a[Constants.k_Event]=e,a[Constants.agentCollectionEpoch]=p(),a[Constants.msgID]=W(Constants.k_getPyzeAppInstanceIdCharSet),a[Constants.local_device_time]=i();try{s=N(I,Constants.k_PyzeStorage,{})}catch(t){s={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}n=s[Constants.retryCount]||1;var o=s[Constants.timeOfAttempt]||a[Constants.agentSentEpoch];s[Constants.timeOfAttempt]=o,w(I,Constants.k_PyzeStorage,s),b.postDataExponentially(a,Constants.TABLE_EVENTS,n,o)}return b={initialize:function(t){var e;I=d()?"localStorage":"cookie",e="object"==typeof t?t[0]:t;try{if(H(e)){var n=function(t){var e,n=!1;D=t;try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var s=e[Constants.k_PyzeKey]||{};if(!O(s)&&H(s[Constants.k_PyzeAppKey])){var a=s[Constants.k_PyzeAppKey]||"";if(!u(a)&&a!=t){n=!0,q();var o={},r={};return o[Constants.k_OldPAK]=a,o[Constants.k_PyzeAppKey]=t,r[Constants.k_PyzeKey]=o,w(I,Constants.k_PyzeStorage,r),!0}}if(!n||O(s)||O(e)){if(O(s)||O(e)){q();var i={};r={};return i[Constants.k_PyzeAppKey]=t,r[Constants.k_PyzeKey]=i,w(I,Constants.k_PyzeStorage,r),!1}return s[Constants.k_PyzeAppKey]=t,e[Constants.k_PyzeKey]=s,w(I,Constants.k_PyzeStorage,e),!1}}(e);if(Y()?(function(){var e,t={},n={},s={};try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var a=e[Constants.k_PyzeActivation]||{};if(O(a))G();else{try{var o=J(),r=o[Constants.k_LocalHour].split("-"),i=o[Constants.k_Hour].split("-"),l=o[Constants.k_Day].split("-"),c=o[Constants.k_Month].split("-"),u=o[Constants.k_Week].split("-"),g=o[Constants.k_Quarter].split("-"),p=a[Constants.k_LocalHour]?a[Constants.k_LocalHour].split("-"):[],y=a[Constants.k_Hour]?a[Constants.k_Hour].split("-"):[],C=a[Constants.k_Day]?a[Constants.k_Day].split("-"):[],d=a[Constants.k_Month]?a[Constants.k_Month].split("-"):[],_=a[Constants.k_Week]?a[Constants.k_Week].split("-"):[],f=a[Constants.k_Quarter]?a[Constants.k_Quarter].split("-"):[];if(r[0]==p[0]&&r[1]==p[1]&&r[2]==p[2]&&r[3]==p[3]||(n[Constants.localHourActivity]=t[Constants.k_LocalHour]=a[Constants.k_LocalHour]=o[Constants.k_LocalHour]),i[0]==y[0]&&i[1]==y[1]&&i[2]==y[2]&&i[3]==y[3]||(n[Constants.hourlyActivity]=t[Constants.k_Hour]=a[Constants.k_Hour]=o[Constants.k_Hour]),l[0]!=C[0]||l[1]!=C[1]||l[2]!=C[2]){n[Constants.dailyActivity]=t[Constants.k_Day]=a[Constants.k_Day]=o[Constants.k_Day];var m=jstz.determine().name();n[Constants.timezone]=t[Constants.k_local_time_zone]=m,s[Constants.k_properties]=n,s[Constants.k_properties][Constants.k_FullTrait]="1",A(s)}u[0]==_[0]&&u[1]==_[1]||(n[Constants.weeklyActivity]=t[Constants.k_Week]=a[Constants.k_Week]=o[Constants.k_Week]),c[0]==d[0]&&c[1]==d[1]||(n[Constants.monthlyActivity]=t[Constants.k_Month]=a[Constants.k_Month]=o[Constants.k_Month]),g[0]==f[0]&&g[1]==f[1]||(n[Constants.quarterlyActivity]=t[Constants.k_Quarter]=a[Constants.k_Quarter]=o[Constants.k_Quarter]),e[Constants.k_PyzeActivation]=a,w(I,Constants.k_PyzeStorage,e)}catch(t){console.log("Error saving time metrics. "+t.message)}if(O(s))return;var k;k=e[Constants.retryCount]||1;var S=e[Constants.timeOfAttempt]||s[Constants.agentSentEpoch];e[Constants.timeOfAttempt]=S,w(I,Constants.k_PyzeStorage,e),b.sendCommonData(s,Constants.TABLE_TRAITS),b.addPayloadToAllRequests(s),b.postDataExponentially(s,Constants.TABLE_TRAITS,k,S)}}(),function(){try{var e;try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var t=e[Constants.k_PyzeTraitChanges]||{};if(O(t))return;var n={},s={},a={};n[Constants.k_context]={};var o=f(),r=parseInt(o.split("x")[0]),i=parseInt(o.split("x")[1]);t[Constants.k_screenWidth]!=r&&(a[Constants.screenWidth]=t[Constants.k_screenWidth]=r,a[Constants.screenHeight]=t[Constants.k_screenHeight]=i,n[Constants.k_context][Constants.k_screen]=a),t[Constants.k_screenHeight]!=i&&(a[Constants.screenWidth]=t[Constants.k_screenWidth]=r,a[Constants.screenHeight]=t[Constants.k_screenHeight]=i,n[Constants.k_context][Constants.k_screen]=a);var l=d()?"Enabled".toString():"Disabled".toString(),c=_()?"Enabled".toString():"Disabled".toString();t[Constants.k_supportsWebStorage]!=l&&(s[Constants.webStorage]=t[Constants.k_supportsWebStorage]=l,n[Constants.k_context][Constants.k_storage]=s[Constants.webStorage]),t[Constants.k_cookiesEnabled]!=c&&(s[Constants.cookieEnabled]=t[Constants.k_cookiesEnabled]=c,n[Constants.k_context][Constants.k_storage]=s[Constants.cookieEnabled]);var u=m(),g=u.split("-")[0].toString();region=u.split("-")[1].toUpperCase(),t[Constants.k_LocaleLanguage]!=g&&(s[Constants.localeLanguage]=t[Constants.k_LocaleLanguage]=g,n[Constants.k_context][Constants.k_Locale]=s[Constants.localeLanguage]),t[Constants.k_LocaleRegion]!=g+"-"+region&&(s[Constants.localeRegion]=t[Constants.k_LocaleRegion]=g+"-"+region,n[Constants.k_context][Constants.k_Locale]=s[Constants.localeRegion]);var p=u.slice(-2).toString().toUpperCase();t[Constants.k_LocaleCountry]!=p&&(s[Constants.localeCountry]=t[Constants.k_LocaleCountry]=p,n[Constants.k_context][Constants.k_Locale]=s[Constants.localeCountry]),e[Constants.k_PyzeTraitChanges]=t,w(I,Constants.k_PyzeStorage,e)}catch(t){console.log("Error sending Traits. "+t.message)}if(null!=n&&!O(n)){var y;y=e[Constants.retryCount]||1;var C=e[Constants.timeOfAttempt]||n[Constants.agentSentEpoch];e[Constants.timeOfAttempt]=C,w(I,Constants.k_PyzeStorage,e),b.sendCommonData(n,Constants.TABLE_TRAITS),b.addPayloadToAllRequests(n),b.postDataExponentially(n,Constants.TABLE_TRAITS,y,C)}}()):E(),function(){var e,t,n={},s={};try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}t=e[Constants.retryCount]||1;var a=e[Constants.timeOfAttempt]||z[Constants.agentSentEpoch];e[Constants.timeOfAttempt]=a,w(I,Constants.k_PyzeStorage,e);var o=e[Constants.k_PyzeMultiActivation]||{},r=!!o[Constants.PREFS_TWO_USAGE_DAYS_IN_L7],i=!!o[Constants.PREFS_THREE_USAGE_DAYS_IN_L7],l=!!o[Constants.PREFS_THREE_USAGE_DAYS],c=!!o[Constants.PREFS_FIVE_USAGE_DAYS],u=!!o[Constants.PREFS_SEVEN_USAGE_DAYS];if(!(r&&i&&l&&c&&u)){var g=(e[Constants.PREFS_LAST_DAYS_USED]||"-").split("-").filter(function(t){return 0!=t.length}),p=new Array(7),y=new Date,C=(y.getFullYear(),y.getUTCFullYear()),d=(y.getMonth(),y.getUTCMonth()+1),_=(y.getDate(),y.getUTCDate());if(todaysDate=""+C+U(d)+U(_),newDateArray=new Array(7),0==g.length&&(p[0]=todaysDate),0<g.length&&g[0]==todaysDate)for(var f=0;f<g.length;f++)p[f]=g[f];if(0<g.length&&g[0]!=todaysDate){var m=0;m=7==g.length?6:g.length,p[0]=todaysDate;for(f=0;f<m;f++)p[f+1]=g[f];try{if(2!=g.length||l||(s[Constants.three_unique_days]=n[Constants.k_ActivationUsageMsgUD3]="1",o[Constants.PREFS_THREE_USAGE_DAYS]=!0),4!=g.length||c||(s[Constants.five_unique_days]=n[Constants.k_ActivationUsageMsgUD5]="1",o[Constants.PREFS_FIVE_USAGE_DAYS]=!0),6!=g.length||u||(s[Constants.seven_unique_days]=n[Constants.k_ActivationUsageMsgUD7]="1",o[Constants.PREFS_SEVEN_USAGE_DAYS]=!0),!r||!i){var k=Array.apply(null,new Array(7)).map(function(t,e){var n=new Date;return n.setUTCDate(n.getUTCDate()+e+1-7),function(t){var e=t.getUTCDate(),n=t.getUTCMonth()+1;return e<10&&(e="0"+e),n<10&&(n="0"+n),t=""+t.getUTCFullYear()+n+e}(n)}).join(",").split(","),S=k.length;if(0<S)for(var A=0;A<7;A++)newDateArray[A]=k[S-A-1];var h=0;h=7==g.length?7:g.length+1;for(var v=0,E=0;E<h;E++)for(var P=0;P<newDateArray.length;P++)p[E]==newDateArray[P]&&v++;2!=v||r||(s[Constants.two_usage_days_in_L7]=n[Constants.k_ActivationUsageMsgB2DinL7]="1",o[Constants.PREFS_TWO_USAGE_DAYS_IN_L7]=!0),3!=v||i||(s[Constants.three_usage_days_in_L7]=n[Constants.k_ActivationUsageMsgB3DinL7]="1",o[Constants.PREFS_THREE_USAGE_DAYS_IN_L7]=!0)}e[Constants.k_PyzeMultiActivation]=o;var z={};z[Constants.k_properties]=s,b.sendCommonData(z,Constants.TABLE_TRAITS),b.addPayloadToAllRequests(z)}catch(t){console.log("Error while saving device traits"+t.message)}}var T="";for(P=0;P<p.length;P++)null==p[P]&&null==p[P]||(T=T+p[P]+"-");e[Constants.PREFS_LAST_DAYS_USED]=T,w(I,Constants.k_PyzeStorage,e)}O(n)||b.postDataExponentially(z,Constants.TABLE_TRAITS,t,a)}(),z(),n){var s;try{s=N(I,Constants.k_PyzeStorage,{})}catch(t){s={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var a=s[Constants.k_PyzeKey]||{};a[Constants.k_OldPAK]&&function(t){var e={};try{var n,s;e[Constants.k_context]={},e[Constants.old_app_key]=g(t)?t:"",v(e);try{s=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}n=s[Constants.retryCount]||1;var a=s[Constants.timeOfAttempt]||e[Constants.agentSentEpoch];s[Constants.timeOfAttempt]=a,w(I,Constants.k_PyzeStorage,s),b.addPayloadToAllRequests(e),0<o(e)&&b.postDataExponentially(e,Constants.TABLE_TRAITS,n,a)}catch(t){console.log(t.message)}}(a[Constants.k_OldPAK])}B()}else console.log("Pyze App Key is incorrect. Kindly visit https://growth.pyze.com to get your Pyze App Key")}catch(t){console.log("Failed to Install Pyze Web SDK. "+t.stack)}},sendCommonData:function(t,e){try{var n;try{n=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):n={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}if(e==Constants.TABLE_TRAITS?t[Constants.k_Type]="traits":e===Constants.TABLE_IDENTITY?t[Constants.k_Type]="identity":e===Constants.TABLE_EVENTS&&(t[Constants.k_Type]="event"),t[Constants.k_context]={},v(t),Y()){var s=n[Constants.k_PyzeKey];t[Constants.appId]=s[Constants.k_PyzeAppInstanceId],e===Constants.TABLE_TRAITS&&(t[Constants.appId2]=s[Constants.k_PyzeAppInstanceId_2]),t[Constants.appKey]=s[Constants.k_PyzeAppKey]}else if(D&&l&&c){(s={})[Constants.k_PyzeAppKey]=D,s[Constants.k_PyzeAppInstanceId]=l,s[Constants.k_PyzeAppInstanceId_2]=c,n[Constants.k_PyzeKey]=s,w(I,Constants.k_PyzeStorage,n),t[Constants.appKey]=D,t[Constants.appId]=l,e===Constants.TABLE_TRAITS&&(t[Constants.appId2]=c)}else{if(!D||l&&c)throw" Pyze App Key has been cleared from storage. Refresh the page to start tracking";b.initialize(D)}}catch(t){console.log("Error while saving information. "+t.message)}},addPayloadToAllRequests:function(t){try{var e;try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}e[Constants.k_UserId]&&(t[Constants.userID]=e[Constants.k_UserId]),e[Constants.k_identityTraits]&&(t[Constants.k_attributes]=e[Constants.k_identityTraits]);var n={};n[Constants.k_utm]={},t[Constants.msgID]=W(Constants.k_getPyzeAppInstanceIdCharSet);var s=S();b.isObjectEmpty(s)||(n[Constants.k_utm]=S(),t[Constants.k_context][Constants.k_utm]=n[Constants.k_utm]);var a=e[Constants.sessionTimestamp],o=t[Constants.agentSentEpoch],r=t;e[Constants.sessionTimestamp]=o,w(I,Constants.k_PyzeStorage,e),o-a>=Constants.k_sessionTimeout&&X(r,Constants.sessionEvent)}catch(t){console.log("Error adding payload. "+t.stack)}},isObjectEmpty:function(t){if(!t)return!0;var e,n=!0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n=!1);return n},postDataToBackEnd:function(s,a,o,r){var t;try{t=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}if(void 0!==t[Constants.k_setUserOptOut]&&null!=t[Constants.k_setUserOptOut]&&null!=t[Constants.k_setUserOptOut]||(t[Constants.k_setUserOptOut]=!1,w(I,Constants.k_PyzeStorage,t)),!t[Constants.k_setUserOptOut]){a.toString();var e=C(),i=new XMLHttpRequest;i.open("POST",Constants.postUrl,!0),i.onreadystatechange=function(){if(4===i.readyState)if(202===i.status)r&&"function"==typeof r&&(o&&null!=o?r(i.status,o):r(i.status));else{var t="Bad HTTP status= "+i.status+" "+i.statusText+" "+i.responseText;if(console.log(t),r&&"function"==typeof r&&500===i.status){var e,n;try{n=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}(e=n[Constants.retryCount]||1)<=Constants.maxRetries?r(i.status,o&&null!=o?o:i.statusText,s,a,e):console.log("won't try again "+e)}else 0===i.status&&500!==i.status&&202!=i.status&&r&&"function"==typeof r&&r(i.status,o&&null!=o?o:i.statusText,s,a,e)}},i.setRequestHeader("t",a),i.setRequestHeader("v",e),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded, charset=UTF-8"),i.send(s)}},postDataFromIndexedDb:function(a,o,r,i,l){var t;try{t=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}if(void 0!==t[Constants.k_setUserOptOut]&&null!=t[Constants.k_setUserOptOut]&&null!=t[Constants.k_setUserOptOut]||(t[Constants.k_setUserOptOut]=!1,w(I,Constants.k_PyzeStorage,t)),!t[Constants.k_setUserOptOut]){o.toString();var e=C(),c=new XMLHttpRequest;c.open("POST",Constants.postUrl,!0),c.onreadystatechange=function(){if(4===c.readyState)if(202===c.status){if(l&&"function"==typeof l)(s=x()).onsuccess=function(t){db=s.result;var e=db.transaction([Constants.idbTransaction],Constants.idbTransactionMode).objectStore(Constants.idbStore);l(c.status,a,o,r&&null!=r?r:c.statusText,e,i)}}else{c.status,c.statusText,c.responseText;if(l&&"function"==typeof l&&500===c.status){try{t=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}if((i=t[Constants.retryCount]||1)<=Constants.maxRetries)(s=x()).onsuccess=function(t){db=s.result;var e=db.transaction([Constants.idbTransaction],Constants.idbTransactionMode).objectStore(Constants.idbStore);l(c.status,a,o,r&&null!=r?r:c.statusText,e,i)}}else if(0===c.status&&500!==c.status&&202!=c.status){var n,s;try{t=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}n=t[Constants.retryCount]||0,(s=x()).onsuccess=function(t){db=s.result;var e=db.transaction([Constants.idbTransaction],Constants.idbTransactionMode).objectStore(Constants.idbStore);l(c.status,a,o,r&&null!=r?r:c.statusText,e,n)}}}},c.setRequestHeader("t",o),c.setRequestHeader("v",e),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded, charset=UTF-8"),c.send(a)}},saveUnsentPayload:function(t,e){var n;try{n=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):n={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var s=function(){var e;try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var t=e[Constants.k_EventCounter]||0;return e[Constants.k_EventCounter]=t,w(I,Constants.k_PyzeStorage,e),Number(t)}(),a=[];a.push(t),a.push(e);var o=s+1,r=N(I,Constants.k_PYZE_UNSENT_EVENTS,{});r[o]=a,n[Constants.k_EventCounter]=o,w(I,Constants.k_PyzeStorage,n),T()?function(n){var s=x();s.onerror=function(t){console.log("error indexedDb connection: "+t.error)},s.onsuccess=function(t){for(var e in db=s.result,n)L(n[e],e,db)}}(r):w(I,Constants.k_PYZE_UNSENT_EVENTS,r)},checkHostReachable:function(t,e,n){var s=Math.floor(65536*(1+Math.random())),a=Constants.postUrl,o=C(),r=new XMLHttpRequest;r.open("GET",a+"/?rand="+s,!0),r.setRequestHeader("t","e"),r.setRequestHeader("v",o),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){if(4==r.readyState)if(202<=r.status&&(r.status<300||304===r.status)&&500!==r.status)n&&"function"==typeof n&&n(r.status,t,e);else{r.status,r.statusText,r.responseText;0!==r.status&&500!==r.status||!n||"function"!=typeof n||n(r.status,t,e)}},r.send()},getTimerReference:function(t){if(!t||"function"!=typeof t)return(new Date).getTime()/1e3-475574e3;t((new Date).getTime()/1e3-475574e3)},getAppInstanceId:function(t){if(t&&"function"==typeof t)try{t(N(I,Constants.k_PyzeStorage,{})[Constants.k_PyzeKey][Constants.k_PyzeAppInstanceId])}catch(t){D?(b.initialize(D),b.getAppInstanceId()):{},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}else console.log("Error callback method not passed")},postWebAppVersion:function(t){try{if(null==t||0==t.length)throw"Web App version cannot be null or empty";var e,n={};try{var s;try{s=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):s={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var a=s[Constants.k_PyzeTraitChanges]||{};e=a[Constants.k_AppBuildVersion]?a[Constants.k_AppBuildVersion]:0;var o=t;if(e!=o||!e){a[Constants.k_AppBuildVersion]=o,s[Constants.k_PyzeTraitChanges]=a,w(I,Constants.k_PyzeStorage,s),n[Constants.k_AppBuildVersion]=t.toString();var r={};e&&(r[Constants.k_OLD_VERSION]=e.toString(),r[Constants.k_NEW_VERSION]=o.toString(),"object"==typeof pyzeEvents?pyzeEvents.postCustomEventWithAttributes(Constants.Event.PYZE_APP_VERSION_CHANGED,r):PyzeEvents._q.push(["postCustomEventWithAttributes",Constants.Event.PYZE_APP_VERSION_CHANGED,r]))}null==n||O(n)||(b.sendCommonData(n,Constants.TABLE_TRAITS),b.addPayloadToAllRequests(n),b.postDataToBackEnd(JSON.stringify(n),Constants.TABLE_TRAITS,null,function(t,e,n,s){202!==t&&(0!==t&&202==t||b.checkHostReachable(n,s,function(t,e,n){0===t&&b.saveUnsentPayload(e,n)}))}))}catch(t){console.log("Error while saving device traits. ",t.message)}}catch(t){console.log(t.message)}},postPageView:function(t,e){z()},isObject:function(t){return!!t&&t.constructor===Object},isNumber:function(t){return("string"==typeof t||"number"==typeof t)&&!isNaN(t-0)&&""!==t},removeIdentityFromStorage:function(){var e;try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):e={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}delete e[Constants.k_UserId],w(I,Constants.k_PyzeStorage,e)},writeIdentityToStorage:function(t,e){var n;try{n=N(I,Constants.k_PyzeStorage,{})}catch(t){D?b.initialize(D):n={},console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}n[t]=e,w(I,Constants.k_PyzeStorage,n)},setUserOptOut:function(t){var e,n;try{e=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}t?((n={})[Constants.k_setUserOptOut]=t,PyzeEvents.postCustomEventWithAttributes(Constants.setOptOut,n),e[Constants.k_setUserOptOut]=t,w(I,Constants.k_PyzeStorage,e)):(e[Constants.k_setUserOptOut]=t,w(I,Constants.k_PyzeStorage,e),(n={})[Constants.k_setUserOptOut]=t,PyzeEvents.postCustomEventWithAttributes(Constants.setOptOut,n))},deleteUser:function(t){try{pyzeObj=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}var e;t?((e={})[Constants.k_deleteUser]=t,PyzeEvents.postCustomEventWithAttributes(Constants.deleteUserEvent,e),pyzeObj[Constants.k_setUserOptOut]=t,w(I,Constants.k_PyzeStorage,pyzeObj)):(pyzeObj[Constants.k_setUserOptOut]=t,w(I,Constants.k_PyzeStorage,pyzeObj),(e={})[Constants.k_deleteUser]=t,PyzeEvents.postCustomEventWithAttributes(Constants.deleteUserEvent,e))},postDataExponentially:function(t,e,n,s){var r,i=p();try{r=N(I,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}s<i&&(t[Constants.agentSentEpoch]=i,r[Constants.timeOfAttempt]=i,w(I,Constants.k_PyzeStorage,r),b.postDataToBackEnd(JSON.stringify(t),e,null,function(t,e,n,s,a){if(202!==t&&(202!=t||0===t))if(500===t){if(a<=Constants.maxRetries){var o=Q(a);setTimeout(function(){b.checkHostReachable(n,s,function(t,e,n){0===t&&500!==t?b.saveUnsentPayload(e,n):a===Constants.maxRetries?(a=r[Constants.retryCount]=1,w(I,Constants.k_PyzeStorage,r)):(a=r[Constants.retryCount]=a+1,w(I,Constants.k_PyzeStorage,r),b.postDataExponentially(JSON.parse(e),n,a,i))})},o)}}else Z(n,s)}))},apply:function(){var t,e;for(t=0;t<arguments.length;t+=1)try{if(""==(e=arguments[t][0]))throw"Event cannot be empty. Did the caller make an error?";if(null==e)throw"Event cannot be undefined. Did the caller make an error?";if(null==e)throw"Event cannot be null. Did the caller make an error?";if(!(e in b))throw"The "+e+" function that you called does not exist. Check the API document for the correct function name";arguments[t].shift(),b[e].apply(null,arguments[t])}catch(t){console.log("Error occured "+JSON.stringify(t.message))}},showInAppMessage:function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText).payloadlist[0],e=JSON.parse(t.templateData);handleMessage=function(t){console.log(t)};var n=document.createElement("style");n.innerHTML="body{font-family: Arial, Helvetica, sans-serif}.pyze-modal{display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0,0,0);background-color: rgba(0,0,0,0.4)}.pyze-modal-content{position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);background-color: white;padding: 1rem 1rem;width: 24rem;border-radius: 0.5rem;text-align: center}.pyze-modal-header{padding: 2px 16px}.pyze-modal-body{padding: 2px 16px}.pyze-modal-footer{padding: 2px 16px}.inappOverflow{border-radius:10px;overflow:hidden}.inappBox{background:white;padding:10px;overflow-y:auto;font-size:1.5em;height:300pt;margin-bottom:10px}.pyzeButton{color:#fff;background-color:#007bff;border-color:#007bff;width:100%;margin:0;height:50px;border-radius:6px;font-size:24px}.flex{-webkit-box-flex:1;-moz-box-flex:1;width:20%;-webkit-flex:1;-ms-flex:1;flex:1}";var s=document.createElement("script");s.innerHTML='function buttonClick(id){handleMessage("From Inapp message");}';var a=document.querySelector("script");a.parentNode.insertBefore(n,a),a.parentNode.insertBefore(s,a);var o=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),u=document.createElement("h2"),g=document.createElement("p");u.style.color=e.titleColor,u.innerText=t.title,g.style.color=e.msgColor,g.innerText=t.msg,r.style.backgroundColor=e.canvas_bgColor,i.appendChild(u),l.appendChild(g),r.appendChild(i),r.appendChild(l),r.appendChild(c),o.appendChild(r),o.classList.add("pyze-modal"),r.classList.add("pyze-modal-content"),r.innerHTML='<div class="inappPosition"><div class="inappOverflow"><div class="inappBox"><h3 style="text-align:center">In App Title</h3><p style="margin: 0;">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Sed viverra ipsum nunc aliquet. Sed blandit libero volutpat sed cras ornare arcu dui. Ultrices gravida dictum fusce ut placerat orci. Iaculis nunc sed augue lacus viverra vitae congue. Consectetur purus ut faucibus pulvinar elementum. Facilisi cras fermentum odio eu feugiat pretium nibh ipsum consequat. Habitant morbi tristique senectus et netus. Vitae auctor eu augue ut. Mattis ullamcorper velit sed ullamcorper. Blandit libero volutpat sed cras ornare arcu dui vivamus. Feugiat scelerisque varius morbi enim. Lacus luctus accumsan tortor posuere ac ut consequat semper viverra. Scelerisque varius morbi enim nunc faucibus a pellentesque sit. Arcu risus quis varius quam quisque id. Senectus et netus et malesuada fames ac turpis.</p></div></div><div style="display: flex;"><div class="flex" style="padding-right: 5px;"> <button class="pyzeButton" onclick="buttonClick(1)">Button 1</button></div><div class="flex" style="padding-left: 5px;"> <button class="pyzeButton" onclick="buttonClick(2)">Button 2</button></div></div></div>',document.body.appendChild(o),o.style.display="block",window.onclick=function(t){t.target==o&&(o.style.display="none",document.body.removeChild(o))}}},t.open("POST","https://ensxm63yekqlun1.m.pipedream.net/?pipedream_response=1",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded, charset=UTF-8");var e=N(I,Constants.k_PyzeStorage,{});t.send(JSON.stringify(e.pyzeID))}}}()),function(){for(Object.defineProperty(Pyze._q,"push",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var t=0,e=this.length,n=arguments.length;t<n;t++,e++)pyze.apply(this[e]=arguments[t]);return e}});Pyze._q.length;)pyze.apply(Pyze._q.shift())}(),"object"!=typeof pyzeEvents&&(pyzeEvents=function(){var a,l;function c(t,e,n){"localStorage"==t?(n=Base64.encode(JSON.stringify(n)),localStorage.setItem(e,n)):"sessionStorage"==t?(n=Base64.encode(JSON.stringify(n)),sessionStorage.setItem(e,n)):"cookie"==t&&(n=Base64.encode(JSON.stringify(n)),createCookie(e,n,Constants.k_Cookie_Expiration_Days))}function u(t,e,n){return function(t,e){var n;if("localStorage"==t)return null!=(n=localStorage.getItem(e))&&null!=n&&""!=n;if("sessionStorage"==t)return null!=(n=sessionStorage.getItem(e))&&null!=n&&""!=n;if("cookie"==t){var s=readCookie(e);return null!=s&&null!=s}}(t,e)?function(t,e){if("localStorage"==t){var n=localStorage.getItem(e);return null!=(n=Base64.decode(n))&&null!=n&&""!=n&&JSON.parse(n)}if("sessionStorage"==t){n=sessionStorage.getItem(e);return null!=(n=Base64.decode(n))&&null!=n&&""!=n&&JSON.parse(n)}if("cookie"==t){var s=readCookie(e);return null!=(s=Base64.decode(s))&&null!=s&&JSON.parse(s)}}(t,e):n}function g(){return!(!function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}()||!function(){var t="test";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(t){return!1}}())}function n(t,e){var n,s,a={},o={};a[Constants.k_properties]={},l=g()?"localStorage":"cookie";try{s=u(l,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}n=s[Constants.retryCount]||1;var r=s[Constants.timeOfAttempt]||a[Constants.agentSentEpoch];if(s[Constants.timeOfAttempt]=r,c(l,Constants.k_PyzeStorage,s),pyze.isObjectEmpty(t)||null==t||null==t)console.log("Attributes is empty.  Did the caller make an error?");else for(var i in t)if(t.hasOwnProperty(i))try{("string"==typeof i||i instanceof String)&&("string"!=typeof t[i]&&"boolean"!=typeof t[i]&&!pyze.isNumber(t[i])||(o[null!=i&&null!=i?i:""]=null!=t[i]&&null!=t[i]?t[i].toString():""))}catch(t){console.log(t.message)}if(!pyze.isObjectEmpty(e)&&null!=e&&null!=t)for(var i in e)if(e.hasOwnProperty(i))try{("string"==typeof i||i instanceof String)&&("string"!=typeof e[i]&&"boolean"!=typeof e[i]&&!pyze.isNumber(e[i])||(o[null!=i&&null!=i?i:""]=null!=e[i]&&null!=e[i]?e[i].toString():""))}catch(t){console.log(t.message)}a[Constants.k_properties]=o;try{a[Constants.k_context]={},pyze.sendCommonData(a,Constants.TABLE_TRAITS),pyze.addPayloadToAllRequests(a)}catch(t){console.log(t.message)}pyze.postDataExponentially(a,Constants.TABLE_TRAITS,n,r)}return a={postCustomEvent:function(t){a.postCustomEventWithAttributes(t,null)},postCustomEventWithAttributes:function(t,e){try{if(null==t||null==t||0==t.length||0==t.trim().length)throw"Event cannot be null or empty or with only white spaces"}catch(t){console.log(t.message)}if("string"==typeof t){var n,s;l=g()?"localStorage":"cookie";var a={};try{if(a[Constants.k_Type]="event",a[Constants.k_Event]=t,a[Constants.k_context]={},pyze.sendCommonData(a,Constants.TABLE_EVENTS),a[Constants.k_attributes]={},pyze.addPayloadToAllRequests(a),null!=e&&null!=e&&!pyze.isObjectEmpty(e)){if(!function(t){return!!t&&t.constructor===Object}(e))return void console.log("Attributes should be provided as a Key - Value pair to appear on the Event Popularity Attribute dashboard");var o=Object.keys?Object.keys(e).length:function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(e);try{if(o>Constants.MAX_ATTRIBUTES)throw"Attributes size is"+o+", exceeding the maximum size of "+Constants.MAX_ATTRIBUTES+".  Did the caller make an error?"}catch(t){console.log(t.message)}for(var r in e)try{if(!e.hasOwnProperty(r))continue;if(!("string"==typeof r||r instanceof String)){console.log("Attributes Keys "+r+"should be provided as a String to appear on the Event Popularity Attribute dashboard");continue}"string"!=typeof e[r]&&"boolean"!=typeof e[r]&&!pyze.isNumber(e[r])||(a[Constants.k_attributes][null!=r&&null!=r?r:""]=null!=e[r]&&null!=e[r]?e[r]:"")}catch(t){console.log(t.message)}}}catch(t){console.log("Error occured "+JSON.stringify(t.message))}if(null!=a&&!pyze.isObjectEmpty(a)){try{s=u(l,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}n=s[Constants.retryCount]||1;var i=s[Constants.timeOfAttempt]||a[Constants.agentSentEpoch];s[Constants.timeOfAttempt]=i,c(l,Constants.k_PyzeStorage,s),pyze.postDataExponentially(a,Constants.TABLE_EVENTS,n,i)}}else console.log("Event names should be provided as a String to appear on the Event Popularity dashboard")},postTimedEvent:function(t,e,n){if(0!=e){var s=(new Date).getTime()/1e3-475574e3-e;0<=s?(null!=n&&null!=n&&!pyze.isObjectEmpty(n)||(n={}),n[Constants.k_Elapsed_Time]=s.toFixed(3)+""):console.log("Posted timed event: "+t+" without elapsed time.")}a.postCustomEventWithAttributes(t,n)},postExplicitActivation:function(){var t={};t[Constants.Event.Activation.ACTIVATE]="1",n(t,null)},postExplicitActivation:function(t){var e={};e[Constants.Event.Activation.ACTIVATE]="1",n(e,t)},apply:function(){var t,e;for(t=0;t<arguments.length;t+=1)try{if(""==(e=arguments[t][0]))throw"Event cannot be empty. Did the caller make an error?";if(null==e)throw"Event cannot be undefined. Did the caller make an error?";if(null==e)throw"Event cannot be null. Did the caller make an error?";if(!(e in a))throw"The "+e+" function that you called does not exist. Check the API document for the correct function name";arguments[t].shift(),a[e].apply(null,arguments[t])}catch(t){console.log("Error occured "+JSON.stringify(t.message))}}}}()),function(){for(Object.defineProperty(PyzeEvents._q,"push",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var t=0,e=this.length,n=arguments.length;t<n;t++,e++)pyzeEvents.apply(this[e]=arguments[t]);return e}});PyzeEvents._q.length;)pyzeEvents.apply(PyzeEvents._q.shift())}(),"object"!=typeof pyzeCuratedEvents&&(pyzeCuratedEvents=function(){var n,i;function a(t,e,n){if(t[Constants.k_attributes]={},!pyze.isObjectEmpty(e)&&null!=e&&null!=e)for(var s in e)if(e.hasOwnProperty(s))try{("string"==typeof s||s instanceof String)&&("string"!=typeof e[s]&&"boolean"!=typeof e[s]&&!pyze.isNumber(e[s])||(t[Constants.k_attributes][null!=s&&null!=s?s:""]=null!=e[s]&&null!=e[s]?e[s].toString():""))}catch(t){console.log(t.message)}if(!pyze.isObjectEmpty(n)&&null!=n&&null!=e)for(var s in n)if(n.hasOwnProperty(s))try{("string"==typeof s||s instanceof String)&&("string"!=typeof n[s]&&"boolean"!=typeof n[s]&&!pyze.isNumber(n[s])||(t[Constants.k_attributes][null!=s&&null!=s?s:""]=null!=n[s]&&null!=n[s]?n[s].toString():""))}catch(t){console.log(t.message)}try{if(null!=t&&!pyze.isObjectEmpty(t)){var a,o;t[Constants.k_Type]="event",t[Constants.k_Source]="pyzeWebAgent",t[Constants.k_context]={},i=function(){if(function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}()&&function(){var t="test";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(t){return!1}}())return!0;return!1}()?"localStorage":"cookie";try{o=function(t,e,n){return function(t,e){{var n;if("localStorage"==t)return null!=(n=localStorage.getItem(e))&&null!=n&&""!=n;if("sessionStorage"==t)return null!=(n=sessionStorage.getItem(e))&&null!=n&&""!=n;if("cookie"==t){var s=readCookie(e);return null!=s&&null!=s}}}(t,e)?function(t,e){{if("localStorage"==t){var n=localStorage.getItem(e);return null!=(n=Base64.decode(n))&&null!=n&&""!=n&&JSON.parse(n)}if("sessionStorage"==t){n=sessionStorage.getItem(e);return null!=(n=Base64.decode(n))&&null!=n&&""!=n&&JSON.parse(n)}if("cookie"==t){var s=readCookie(e);return null!=(s=Base64.decode(s))&&null!=s&&JSON.parse(s)}}}(t,e):n}(i,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}a=o[Constants.retryCount]||1;var r=o[Constants.timeOfAttempt]||t[Constants.agentSentEpoch];o[Constants.timeOfAttempt]=r,function(t,e,n){"localStorage"==t?(n=Base64.encode(JSON.stringify(n)),localStorage.setItem(e,n)):"sessionStorage"==t?(n=Base64.encode(JSON.stringify(n)),sessionStorage.setItem(e,n)):"cookie"==t&&(n=Base64.encode(JSON.stringify(n)),createCookie(e,n,Constants.k_Cookie_Expiration_Days))}(i,Constants.k_PyzeStorage,o),pyze.sendCommonData(t,Constants.TABLE_EVENTS),pyze.addPayloadToAllRequests(t),pyze.postDataExponentially(t,Constants.TABLE_EVENTS,a,r)}}catch(t){console.log(t.message)}}return n={post:function(t,e,n){try{if(null==t||null==t||0==t.length||0==t.trim().length)throw"Event cannot be null or empty or with only white spaces"}catch(t){console.log("Event Name is "+t.message+". Refer to Pyze Web API documentation and provide a valid method name.")}if("string"==typeof t){if(pyze.isObjectEmpty(e)||null==e)e={};var s={};s[Constants.k_Event]=t,a(s,e,n)}else console.log("Event names should be provided as a String to appear on the Event Popularity dashboard")},apply:function(){var t,e;for(t=0;t<arguments.length;t+=1)try{if(""==(e=arguments[t][0]))throw"Event cannot be empty. Did the caller make an error?";if(null==e)throw"Event cannot be undefined. Did the caller make an error?";if(null==e)throw"Event cannot be null. Did the caller make an error?";if(!(e in n))throw"The "+e+" function that you called does not exist. Check the API document for the correct function name";arguments[t].shift(),n[e].apply(null,arguments[t])}catch(t){console.log("Error occured "+JSON.stringify(t.message))}}}}()),function(){for(Object.defineProperty(PyzeCuratedEvents._q,"push",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var t=0,e=this.length,n=arguments.length;t<n;t++,e++)pyzeCuratedEvents.apply(this[e]=arguments[t]);return e}});PyzeCuratedEvents._q.length;)pyzeCuratedEvents.apply(PyzeCuratedEvents._q.shift())}(),"object"!=typeof pyzeIdentity&&(pyzeIdentity=function(){var n,i;function l(t,e){pyze.writeIdentityToStorage(t,e)}function c(t){return!!t&&t.constructor===Object}function u(t){var e={};for(var n in t)try{for(var s in c(t[n])&&(e[n]=u(t[n])),t)"string"==typeof s||s instanceof String?"string"!=typeof t[s]&&"boolean"!=typeof t[s]&&!pyze.isNumber(t[s])||(e[null!=s&&null!=s?s:""]=null!=t[s]&&null!=t[s]?t[s].toString():""):console.log("Attributes Keys "+n+"should be provided as a String to appear on the Event Popularity Attribute dashboard")}catch(t){console.log(t.message)}return e}function g(t,e,n){return function(t,e){var n;if("localStorage"==t)return null!=(n=localStorage.getItem(e))&&null!=n&&""!=n;if("sessionStorage"==t)return null!=(n=sessionStorage.getItem(e))&&null!=n&&""!=n;if("cookie"==t){var s=readCookie(e);return null!=s&&null!=s}}(t,e)?function(t,e){if("localStorage"==t){var n=localStorage.getItem(e);return null!=(n=Base64.decode(n))&&null!=n&&""!=n&&JSON.parse(n)}if("sessionStorage"==t){n=sessionStorage.getItem(e);return null!=(n=Base64.decode(n))&&null!=n&&""!=n&&JSON.parse(n)}if("cookie"==t){var s=readCookie(e);return null!=(s=Base64.decode(s))&&null!=s&&JSON.parse(s)}}(t,e):n}function p(t,e,n){"localStorage"==t?(n=Base64.encode(JSON.stringify(n)),localStorage.setItem(e,n)):"sessionStorage"==t?(n=Base64.encode(JSON.stringify(n)),sessionStorage.setItem(e,n)):"cookie"==t&&(n=Base64.encode(JSON.stringify(n)),createCookie(e,n,Constants.k_Cookie_Expiration_Days))}function y(){return!(!function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}()||!function(){var t="test";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(t){return!1}}())}return n={setUserIdentifer:function(t){var e={},n={};if("string"==typeof t||"boolean"==typeof t||pyze.isNumber(t)){if(null==t||null==t)return;if("string"==typeof t&&(0==t.length||0==t.trim().length))return;var s,a;e[Constants.k_UserId]=t.toString(),l(Constants.k_UserId,t.toString()),n[Constants.k_Type]="Identity",n[Constants.k_context]={},n[Constants.userID]=e[Constants.k_UserId],i=y()?"localStorage":"cookie";try{a=g(i,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}s=a[Constants.retryCount]||1;var o=a[Constants.timeOfAttempt]||n[Constants.agentSentEpoch];a[Constants.timeOfAttempt]=o,p(i,Constants.k_PyzeStorage,a),pyze.sendCommonData(n,Constants.TABLE_IDENTITY),pyze.addPayloadToAllRequests(n),pyze.postDataExponentially(n,Constants.TABLE_IDENTITY,s,o)}else console.log("Pyze Tip : Used ID should be a String/Boolean/Number")},setUserIdentifier:function(t){var e={},n={};if("string"==typeof t||"boolean"==typeof t||pyze.isNumber(t)){if(null==t||null==t)return;if("string"==typeof t&&(0==t.length||0==t.trim().length))return;var s,a;e[Constants.k_UserId]=t.toString(),l(Constants.k_UserId,t.toString()),n[Constants.k_Type]="Identity",n[Constants.k_context]={},n[Constants.userID]=e[Constants.k_UserId],i=y()?"localStorage":"cookie";try{a=g(i,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}s=a[Constants.retryCount]||1;var o=a[Constants.timeOfAttempt]||n[Constants.agentSentEpoch];a[Constants.timeOfAttempt]=o,p(i,Constants.k_PyzeStorage,a),pyze.sendCommonData(n,Constants.TABLE_IDENTITY),pyze.addPayloadToAllRequests(n),pyze.postDataExponentially(n,Constants.TABLE_IDENTITY,s,o)}else console.log("Pyze Tip : Used ID should be a String/Boolean/Number")},resetUserIdentifier:function(){pyze.removeIdentityFromStorage()},postTraits:function(t){var e={};e[Constants.k_identityTraits]={};var n={};if(pyze.isObject(t)){if(!pyze.isObjectEmpty(t)&&null!=t&&null!=t){for(var s in t)if(t.hasOwnProperty(s))try{c(t[s])?n[s]=u(t[s]):("string"==typeof s||s instanceof String)&&("string"==typeof t[s]||"boolean"==typeof t[s]||pyze.isNumber(t[s])?n[null!=s&&null!=s?s:""]=null!=t[s]&&null!=t[s]?t[s].toString():"":console.log("Pyze Tip : Attribute values should be a String/Boolean/Number"))}catch(t){console.log(t.message)}if(l(Constants.k_identityTraits,n),e[Constants.k_identityTraits]=n,!pyze.isObjectEmpty(e)){var a,o;e[Constants.k_Type]="Identity",e[Constants.k_Source]="pyzeWebAgent",e[Constants.k_context]={},i=y()?"localStorage":"cookie";try{o=g(i,Constants.k_PyzeStorage,{})}catch(t){console.log("Error: "+t.message+" in "+Constants.k_PyzeStorage)}a=o[Constants.retryCount]||1;var r=o[Constants.timeOfAttempt]||e[Constants.agentSentEpoch];o[Constants.timeOfAttempt]=r,p(i,Constants.k_PyzeStorage,o),pyze.sendCommonData(e,Constants.TABLE_IDENTITY),pyze.addPayloadToAllRequests(e),pyze.postDataExponentially(e,Constants.TABLE_IDENTITY,a,r)}}}else console.log("Pyze Tip : Attributes when provided as a Key - Value pair are nicer to see on the Event Popularity Attribute dashboard")},apply:function(){var t,e;for(t=0;t<arguments.length;t+=1)try{if(""==(e=arguments[t][0]))throw"Function cannot be empty. Did the caller make an error?";if(null==e)throw"Function cannot be undefined. Did the caller make an error?";if(null==e)throw"Function cannot be null. Did the caller make an error?";if(!(e in n))throw"The "+e+" function that you called does not exist. Check the API document for the correct function name";arguments[t].shift(),n[e].apply(null,arguments[t])}catch(t){console.log("Error occured "+JSON.stringify(t.message))}}}}()),function(){if("undefined"!=typeof PyzeIdentity&&"undefined"!==PyzeIdentity._q)for(Object.defineProperty(PyzeIdentity._q,"push",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var t=0,e=this.length,n=arguments.length;t<n;t++,e++)pyzeIdentity.apply(this[e]=arguments[t]);return e}});PyzeIdentity._q.length;)pyzeIdentity.apply(PyzeIdentity._q.shift())}();